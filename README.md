# üîê Auth API –Ω–∞ ASP.NET 9.0 & PostgreSQL

![ASP.NET](https://img.shields.io/badge/ASP.NET-9.0-purple?style=for-the-badge&logo=.net)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-15-blue?style=for-the-badge&logo=postgresql)

–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–µ REST API –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è–º–∏, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –Ω–∞ **ASP.NET 9.0** –∏ **PostgreSQL**. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–∫–ª—é—á–∞—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —á–µ—Ä–µ–∑ –∫—É–∫–∏, –∑–∞–≥—Ä—É–∑–∫—É –∞–≤–∞—Ç–∞—Ä–æ–∫ –∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫. üöÄ

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîê **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∫—É–∫–∏** - –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ HTTP-only –∫—É–∫–∏
- üë§ **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥** - –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- üñºÔ∏è **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∫–∞–º–∏** - –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –ø—Ä–æ—Ñ–∏–ª—è
- üç™ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏** - –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –≤—Ö–æ–¥ —Å —Å–∫–æ–ª—å–∑—è—â–∏–º expiration
- üõ°Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ** - –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π, CORS –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- üìÅ **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤** - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –∏ —Ä–∞–∑–º–µ—Ä–∞ –∞–≤–∞—Ç–∞—Ä–æ–∫
- üìä **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- üéØ **RESTful –¥–∏–∑–∞–π–Ω** - –ß–∏—Å—Ç—ã–µ API endpoints

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Auth API ‚úÖ
‚îú‚îÄ‚îÄ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è üîë
‚îÇ   ‚îú‚îÄ‚îÄ –°–µ—Å—Å–∏–∏ —á–µ—Ä–µ–∑ –∫—É–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (SHA256)
‚îÇ   ‚îî‚îÄ‚îÄ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ HTTP-only –∫—É–∫–∏
‚îú‚îÄ‚îÄ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö üóÑÔ∏è
‚îÇ   ‚îú‚îÄ‚îÄ PostgreSQL 15
‚îÇ   ‚îú‚îÄ‚îÄ Entity Framework Core
‚îÇ   ‚îî‚îÄ‚îÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ –§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ üìÅ
‚îÇ   ‚îú‚îÄ‚îÄ –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞
‚îî‚îÄ‚îÄ API endpoints üåê
    ‚îú‚îÄ‚îÄ RESTful –¥–∏–∑–∞–π–Ω
    ‚îú‚îÄ‚îÄ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
    ‚îî‚îÄ‚îÄ JSON –æ—Ç–≤–µ—Ç—ã
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- [.NET 9.0 SDK](https://dotnet.microsoft.com/download/dotnet/9.0) üì¶
- [PostgreSQL 15](https://www.postgresql.org/download/) üêò

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π** üì•
   ```bash
   git clone https://github.com/woookle/aspnet-auth.git
   cd aspnet-auth
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö** ‚öôÔ∏è
   
   –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL –∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ `appsettings.json`:
   ```json
   {
     "ConnectionStrings": {
       "DefaultConnection": "Host=localhost;Port=5432;Database=authapi;Username=–≤–∞—à_username;Password=–≤–∞—à_–ø–∞—Ä–æ–ª—å;"
     }
   }
   ```

3. **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** üóÉÔ∏è
   ```bash
   dotnet ef database update
   ```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** üèÉ‚Äç‚ôÇÔ∏è
   ```bash
   dotnet run
   ```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å–∞–º `https://localhost:7000` –∏ `http://localhost:5000` üéâ

## üìö API Endpoints

### Endpoints –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ üîë

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è |
|--------|----------|-------------|---------------|
| `POST` | `/api/auth/register` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | ‚ùå |
| `POST` | `/api/auth/login` | –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | ‚ùå |
| `POST` | `/api/auth/logout` | –í—ã—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | ‚úÖ |
| `GET` | `/api/auth/me` | –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | ‚úÖ |

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∫–∞–º–∏ üñºÔ∏è

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ | –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è |
|--------|----------|-------------|---------------|
| `POST` | `/api/auth/avatar` | –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∫–∏ | ‚úÖ |
| `DELETE` | `/api/auth/avatar` | –£–¥–∞–ª–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∫–∏ | ‚úÖ |

## üéÆ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è üë§
```http
POST /api/auth/register
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "securepassword123"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "User registered successfully",
  "data": {
    "id": 1,
    "email": "user@example.com",
    "avatarUrl": null,
    "createdAt": "2024-01-15T10:30:00Z"
  }
}
```

### –í—Ö–æ–¥ üîë
```http
POST /api/auth/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "securepassword123"
}
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∫–∏ üñºÔ∏è
```http
POST /api/auth/avatar
Content-Type: multipart/form-data

file: [avatar.jpg]
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è üë§
```http
GET /api/auth/me
```

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ üìÅ
```
AuthApi/
‚îú‚îÄ‚îÄ Controllers/          # API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ AuthController.cs
‚îÇ   ‚îî‚îÄ‚îÄ ErrorController.cs
‚îú‚îÄ‚îÄ Models/              # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ User.cs
‚îÇ   ‚îú‚îÄ‚îÄ LoginRequest.cs
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ Services/            # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ IUserService.cs
‚îÇ   ‚îî‚îÄ‚îÄ UserService.cs
‚îú‚îÄ‚îÄ Data/               # –ö–æ–Ω—Ç–µ–∫—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ AppDbContext.cs
‚îú‚îÄ‚îÄ Migrations/         # –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ wwwroot/           # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (–∞–≤–∞—Ç–∞—Ä–∫–∏)
    ‚îî‚îÄ‚îÄ avatars/
```

### –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ üîß
```bash
# –†–µ–∂–∏–º watch (–∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö)
dotnet watch run

# –° —É–∫–∞–∑–∞–Ω–∏–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏—è
ASPNETCORE_ENVIRONMENT=Development dotnet run
```

### –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö üóÑÔ∏è
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
dotnet ef migrations add AddNewFeature

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
dotnet ef database update

# –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
dotnet ef database update PreviousMigrationName
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è üåç
```bash
ASPNETCORE_ENVIRONMENT=Development
ConnectionStrings__DefaultConnection=–≤–∞—à–∞_—Å—Ç—Ä–æ–∫–∞_–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫—É–∫–∏ üç™
- **–ò–º—è**: `auth.token`
- **HTTP Only**: ‚úÖ –î–∞
- **Secure**: ‚úÖ –¢–æ–ª—å–∫–æ –≤ production
- **SameSite**: Strict
- **–í—Ä–µ–º—è –∂–∏–∑–Ω–∏**: 7 –¥–Ω–µ–π
- **–°–∫–æ–ª—å–∑—è—â–µ–µ expiration**: ‚úÖ –í–∫–ª—é—á–µ–Ω–æ

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ üìÅ
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä**: 5MB
- **–†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è**: .jpg, .jpeg, .png, .gif, .webp
- **–ü—É—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏—è**: `wwwroot/avatars/`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å curl üîÑ
```bash
# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
curl -X POST https://localhost:7000/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"password123"}'

# –í—Ö–æ–¥ (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫—É–∫–∏)
curl -X POST https://localhost:7000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"password123"}' \
  -c cookies.txt

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—É–∫–∏)
curl -X GET https://localhost:7000/api/auth/me \
  -b cookies.txt
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Postman üöÄ
1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∫–æ–ª–ª–µ–∫—Ü–∏—é –∏–∑ `/docs/postman-collection.json`
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∞–∑–æ–≤—ã–π URL –≤–∞—à–µ–≥–æ API
3. –í–∫–ª—é—á–∏—Ç–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫—É–∫ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Postman

## üîí –§—É–Ω–∫—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π**: SHA256
- **HTTP-only –∫—É–∫–∏**: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç XSS –∞—Ç–∞–∫–∏
- **CORS –∑–∞—â–∏—Ç–∞**: –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–ª—è –¥–æ–º–µ–Ω–æ–≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**: –í–∞–ª–∏–¥–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤
- **–ó–∞—â–∏—Ç–∞ –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π**: –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è Entity Framework
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Ç–∏–ø—É –∏ —Ä–∞–∑–º–µ—Ä—É

## üìä –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤

–í—Å–µ –æ—Ç–≤–µ—Ç—ã API —Å–ª–µ–¥—É—é—Ç —Ñ–æ—Ä–º–∞—Ç—É:
```json
{
  "success": boolean,
  "message": "string",
  "data": object | null
}
```

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö:

| HTTP Status | –°—Ü–µ–Ω–∞—Ä–∏–π |
|-------------|----------|
| `400 Bad Request` | –ù–µ–≤–µ—Ä–Ω—ã–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –¥—É–±–ª–∏–∫–∞—Ç email |
| `401 Unauthorized` | –ù–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è |
| `404 Not Found` | –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω |
| `500 Internal Server Error` | –ü—Ä–æ–±–ª–µ–º—ã –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ |

---

<br />

<div>
  <p align='center'>
    <img src='https://media1.tenor.com/m/oKZVauJ1LWEAAAAd/anime-fern.gif' />
  </p>
  <h2 align='center'>—Ö–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è üòä</h2>
</div>